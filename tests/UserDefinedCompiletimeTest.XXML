#import Language::Core;

[ Class <Point> Compiletime Final Extends None
    [ Private <>
        Property <x> Types Integer^;
        Property <y> Types Integer^;
    ]

    [ Public <>
        Constructor = default;

        Constructor Parameters (
            Parameter <px> Types Integer^,
            Parameter <py> Types Integer^
        ) -> {
            Set x = px;
            Set y = py;
        }

        Method <getX> Returns Integer^ Parameters () -> {
            Return x;
        }

        Method <getY> Returns Integer^ Parameters () -> {
            Return y;
        }
    ]
]

[ Entrypoint
    {
        // Test compile-time folding of user-defined class
        Instantiate Compiletime Point^ As <p> = Point::Constructor(
            Integer::Constructor(10),
            Integer::Constructor(20)
        );

        // These method calls should fold at compile time
        Run Console::printLine(String::Constructor("Point created at compile time"));
        Run Console::printLine(String::Constructor("x = ").append(p.getX().toString()));
        Run Console::printLine(String::Constructor("y = ").append(p.getY().toString()));
    }
]
