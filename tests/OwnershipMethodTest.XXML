#import Language::Core;
#import Language::IO;

// Test: Passing owned variable to owned method parameter
[ Entrypoint
    {
        Run Console::printLine(String::Constructor("=== Ownership Method Test ==="));

        Instantiate String^ As <content> = String::Constructor("Hello World");
        Instantiate String^ As <path> = String::Constructor("test.txt");
        Instantiate String^ As <mode> = String::Constructor("w");

        // Open file (takes owned parameters)
        Instantiate IO::File^ As <file> = IO::File::Constructor(path, mode);

        // Write takes owned String^ - should move content
        Run file.write(content);

        // ERROR: Use after passing to owned parameter
        Run Console::printLine(content);

        Exit(0);
    }
]
